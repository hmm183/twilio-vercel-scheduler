<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Schedule a Call</title>
  <style>
    body { font-family: sans-serif; max-width: 400px; margin: 2rem auto; }
    input, button { width: 100%; padding: 0.5rem; margin-top: 0.5rem; }
    p { margin-top: 1rem; color: green; }
  </style>
</head>
<body>
  <h1>Schedule Your Call</h1>
  <label>
    Pick date & time (local):
    <input id="dt" type="datetime-local"/>
  </label>
  <button id="go">Schedule Call</button>
  <p id="msg"></p>

  <script>
    document.getElementById('go').onclick = async () => {
      const dt = document.getElementById('dt').value;
      const msg = document.getElementById('msg');
      if (!dt) return msg.textContent = 'Please select a date & time.';

      // convert to UTC ISO
      const runAt = new Date(dt).toISOString();

      const res = await fetch('/api/schedule', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ runAt })
      });

      const text = await res.text();
      msg.textContent = res.ok ? text : `Error ${res.status}: ${text}`;
    };
  </script>
</body>
</html>
